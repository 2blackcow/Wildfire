
# 🔥 산불 예측 프로젝트 - `crawling` 폴더 작업 설명

## 📁 폴더 개요
`crawling/` 폴더는 **2024-10-01 ~ 2025-04-01 기간 동안의 산불 발생 정보 수집 및 기상 데이터 병합**을 담당하는 스크립트를 포함합니다.

---

## 1️⃣ forest.py
산림청 산불발생정보 사이트에서 데이터를 크롤링하여 CSV 파일로 저장합니다.

- **크롤링 대상**:  
  - 발생일시, 진화일시, 발생지 주소, 진행상태, 대응단계  
- **설정**:  
  - 기간: 2024-10-01 ~ 2025-04-01  
  - 진행상태: `진화완료` 만 필터링  
  - 페이지 수 자동 계산 후, 전 페이지 반복 수집  
- **출력 파일**:  
  - `wildfire_all_2024_10_to_2025_04.csv`  
- ✅ 크롤링 중 매 행마다 진행상황 출력

---

## 2️⃣ geocode.py
주소 데이터를 위도/경도로 변환합니다 (카카오 주소 API 사용).

- **입력**: `wildfire_all_2024_10_to_2025_04.csv`
- **출력**: `wildfire_geocoded_2024_10_to_2025_04.csv`
- ✅ 예외처리 및 API 호출 실패 로그 포함  
- ✅ `.env`에서 `KAKAO_REST_API_KEY` 사용

---

## 3️⃣ meteostat.py
Meteostat API를 통해 각 위경도 좌표 및 날짜별 기온, 풍속, 풍향 정보를 가져와 병합합니다.

- **입력**: `wildfire_geocoded_2024_10_to_2025_04.csv`
- **출력**: `train_fire_data.csv`
- **가져오는 필드**:
  - 평균기온 (`평균기온 (temp)`)
  - 평균풍속 (`평균풍속 (wspd)`)
  - 풍향각도 (`풍향각도 (wdir)`)
- ✅ `.env`에서 `METEOSTAT_KEY` 사용

---

## 4️⃣ weatherbit.py
Weatherbit API를 통해 각 위경도 및 날짜에 해당하는 **강수량 및 상대습도** 데이터를 추가로 병합합니다.

- **입력**: `train_fire_data.csv`
- **출력**: `train_fire_data_with_weatherbit.csv`
- **가져오는 필드**:
  - 강수량 (`강수량 (precip)`)
  - 습도 (`습도 (rh)`)
- ✅ 날짜 범위는 하루(`start_date = date`, `end_date = date + 1`)
- ✅ `.env`에서 `WEATHERBIT_KEY` 사용

---

## 📦 사용된 외부 서비스 및 API

| 서비스     | 사용 목적              | API KEY 위치        |
|------------|------------------------|---------------------|
| 산림청 사이트 | 산불 목록 크롤링         | X (공개 페이지)     |
| Kakao Map  | 주소 → 위경도 변환       | `.env` → `KAKAO_REST_API_KEY` |
| Meteostat  | 기온/풍속/풍향 정보 획득 | `.env` → `METEOSTAT_KEY`      |
| Weatherbit | 강수량/습도 정보 획득    | `.env` → `WEATHERBIT_KEY`     |

---

## 📌 전체 흐름 요약

1. `forest.py` → 산불 목록 CSV 저장  
2. `geocode.py` → 주소 → 위경도 변환  
3. `meteostat.py` → 기상 정보 1차 병합  
4. `weatherbit.py` → 기상 정보 2차 병합  
5. ✅ 최종 결과: `train_fire_data_with_weatherbit.csv` 완성

---

## 🔍 예측 모델에서의 활용

수집 및 병합된 데이터는 산불 발생 여부를 예측하는 머신러닝 모델의 학습에 사용됩니다. 주요 활용 방식은 다음과 같습니다:

### 📌 Feature 역할
- **위치 정보(위도, 경도)**: 지역별 기상 특성과 산불 발생 패턴을 학습하는 데 사용됨
- **기상 정보**
  - **평균기온 (temp)**: 온도가 높을수록 산불 가능성이 증가함
  - **평균풍속 (wspd), 풍향 (wdir)**: 바람은 산불의 확산을 결정하는 주요 요인
  - **강수량 (precip), 습도 (rh)**: 습한 날씨나 강수는 산불 발생 가능성을 낮춤

### 🔍 예측 대상 (Target)
- 추후 **fire_occurred** 필드를 통해 산불 발생 여부(0 또는 1)를 학습 데이터로 설정함
- 실제 미발생 지역의 데이터를 샘플링하여 **음성 데이터(0)**도 함께 구성함

### 🧠 학습 모델 예시
- **RandomForest, XGBoost, LightGBM** 등 구조적 데이터를 잘 처리하는 트리 기반 모델
- 또는 **딥러닝 기반 모델**도 가능하며, 시계열 요소까지 반영 가능

이 과정을 통해 수집된 데이터는 예측 정확도 향상에 크게 기여하며, 산불 예방 및 조기 대응 시스템의 핵심 기반이 됩니다.
