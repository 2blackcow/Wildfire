<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Cesium + MAXAR 시계열 화재</title>

    <script src="https://cesium.com/downloads/cesiumjs/releases/1.116/Build/Cesium/Cesium.js"></script>
    <link
      href="https://cesium.com/downloads/cesiumjs/releases/1.116/Build/Cesium/Widgets/widgets.css"
      rel="stylesheet"
    />

    <style>
      html,
      body,
      #cesiumContainer {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
      }

      #infoPanel {
        position: absolute;
        top: 10px;
        left: 10px;
        z-index: 10;
        background-color: rgba(0, 0, 0, 0.75);
        color: white;
        padding: 10px 14px;
        border-radius: 8px;
        font-family: sans-serif;
        font-size: 14px;
        min-width: 200px;
        pointer-events: none;
      }

      #windArrow {
        font-size: 32px;
        text-align: center;
        transform-origin: center;
        transition: transform 0.4s ease;
        margin-bottom: 8px;
      }

      #dateLabel {
        position: absolute;
        bottom: 180px;
        left: 10px;
        background-color: rgba(0, 123, 255, 0.9);
        color: white;
        padding: 6px 12px;
        border-radius: 6px;
        font-size: 14px;
        font-family: sans-serif;
        z-index: 10;
        font-weight: 500;
      }

      #controlsContainer {
        position: absolute;
        bottom: 30px;
        left: 10px;
        z-index: 10;
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        font-family: sans-serif;
        gap: 8px;
      }

      .controls-wrapper {
        background-color: rgba(0, 0, 0, 0.8);
        padding: 12px;
        border-radius: 8px;
        display: flex;
        flex-direction: column;
        gap: 8px;
        min-width: 280px;
        border: 1px solid rgba(255, 255, 255, 0.1);
      }

      .top-row {
        display: flex;
        flex-direction: row;
        align-items: center;
        gap: 12px;
      }

      #toggleButton {
        padding: 8px 16px;
        font-size: 14px;
        font-weight: 500;
        border: none;
        border-radius: 6px;
        background-color: #007bff;
        color: white;
        cursor: pointer;
        transition: all 0.2s;
        min-width: 80px;
        white-space: nowrap;
      }

      #toggleButton:hover {
        background-color: #0056b3;
        transform: translateY(-1px);
      }

      #timeSlider {
        appearance: none;
        -webkit-appearance: none;
        width: 140px;
        height: 8px;
        background: #444;
        border-radius: 4px;
        outline: none;
        transition: background 0.3s;
        flex-shrink: 0;
      }

      #timeSlider:hover {
        background: #555;
      }

      #timeSlider::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 16px;
        height: 16px;
        border-radius: 50%;
        background: #007bff;
        cursor: pointer;
        transition: all 0.3s;
        border: 2px solid white;
      }

      #timeSlider::-webkit-slider-thumb:hover {
        background: #0056b3;
        transform: scale(1.1);
      }

      #timeSlider::-moz-range-thumb {
        width: 16px;
        height: 16px;
        border-radius: 50%;
        background: #007bff;
        cursor: pointer;
        border: 2px solid white;
      }

      #fireDateSelect {
        padding: 8px 12px;
        font-size: 14px;
        border-radius: 6px;
        border: 1px solid #555;
        width: 100%;
        background-color: rgba(255, 255, 255, 0.95);
        color: #333;
        font-family: sans-serif;
      }

      #fireDateSelect:focus {
        outline: none;
        border-color: #007bff;
        box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
      }

      #fireInfo {
        color: white;
        font-size: 13px;
        text-align: center;
        background-color: rgba(255, 87, 34, 0.9);
        border-radius: 6px;
        padding: 6px 10px;
        margin-top: 4px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        border: 1px solid rgba(255, 87, 34, 0.5);
        font-weight: 500;
      }

      .cesium-infoBox {
        bottom: 20px !important;
        top: auto !important;
        right: 20px !important;
        left: auto !important;
        max-height: 40vh;
        z-index: 1000;
      }
      
      #weatherInfo {
        font-size: 14px;
        line-height: 1.4;
        white-space: pre-line;
      }
    </style>
  </head>

  <body>
    <div id="cesiumContainer"></div>

    <div id="infoPanel">
      <div id="windArrow">↑</div>
      <div id="weatherInfo">🖱️ 지도에서 위치를 클릭하세요</div>
    </div>

    <div id="dateLabel">🗓️ 2025-01-08</div>

    <div id="controlsContainer">
      <div class="controls-wrapper">
        <div class="top-row">
          <button id="toggleButton">▶ 재생</button>
          <input
            type="range"
            id="timeSlider"
            min="0"
            max="7"
            value="0"
            step="1"
          />
        </div>
        <select id="fireDateSelect">
          <option value="0">20250108m-maxar</option>
          <option value="1">20250109m-maxar</option>
          <option value="2">20250110n-maxar</option>
          <option value="3">20250113m-maxar</option>
          <option value="4">20250114m-maxar</option>
          <option value="5">20250116m-maxar</option>
          <option value="6">20250118m-maxar</option>
          <option value="7">20250120m-maxar</option>
        </select>
        <div id="fireInfo">🔥 산불 데이터 로딩 중...</div>
      </div>
    </div>

    <div style="position: absolute; top: 60px; right: 30px; z-index: 1000;">
      <button id="toggleActualBtn">🔥 관측 화점 OFF</button>
      <button id="togglePredBtn">🤖 AI 예측 화점 OFF</button>
    </div>

  <!-- 관측·예측 화점 범례 (좌측 중앙, 미니멀/수정본) -->
  <div id="fire-legend" style="
    position: absolute;
    right: 18px; top: 38%; z-index: 99;
    background: rgba(30,30,30,0.83); color: #fff;
    border-radius: 8px; padding: 8px 11px;
    font-size: 12px; box-shadow: 1px 2px 8px #0002;
    pointer-events: none; user-select: none;">
    <b style="font-size:13px;">🔥 관측·예측 화점 범례</b>
    <hr style="border: none; border-top: 1px solid #444; margin: 4px 0 8px 0;">

    <!-- 관측 화점 -->
    <div style="margin-bottom:5px;">
      <span style="font-size:11px;opacity:.85">관측 화점 (실제 위성)</span>
      <br>
      <span style="display:inline-block;width:12px;height:12px;border-radius:50%;background:#ff0000;margin-right:3px;vertical-align:middle;"></span>
      높음
      <span style="display:inline-block;width:12px;height:12px;border-radius:50%;background:#ff9800;margin-left:11px;margin-right:3px;vertical-align:middle;"></span>
      중간
      <span style="display:inline-block;width:12px;height:12px;border-radius:50%;background:#ffff00;border:1px solid #888;margin-left:11px;margin-right:3px;vertical-align:middle;"></span>
      낮음
      <br>
      <svg width="70" height="13" style="vertical-align:middle;margin-top:1px;">
        <circle cx="9" cy="7" r="4" fill="#bbb" stroke="#fff" stroke-width="0.5"/>
        <text x="16" y="11" fill="#fff" font-size="9">FRP↓</text>
        <circle cx="54" cy="7" r="7" fill="#bbb" stroke="#fff" stroke-width="0.5"/>
        <text x="62" y="11" fill="#fff" font-size="9">FRP↑</text>
      </svg>
      <div style="font-size:10px;color:#bbb;margin-top:1px;">* 점 크기: FRP(방사 강도) 비례</div>
    </div>

    <!-- 예측 화점 -->
    <div style="margin-top:7px;">
      <span style="font-size:11px;opacity:.85">AI 예측 화점</span>
      <br>
      <span style="display:inline-block;width:14px;height:14px;border-radius:50%;background:chartreuse;margin-right:5px;vertical-align:middle;border:1px solid #888;"></span>
      예측 화점
      <div style="font-size:10px;color:#bbb;margin-top:1px;">* 확률 높을수록 투명도 감소 (진해짐)</div>
    </div>
  </div>

    <script src="/main.js"></script>
  </body>
</html>